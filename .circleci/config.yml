version: 2.1
workflows:
  ten-workflow:
    jobs:
      - checkout-code
      - ten-job-la-day
      - job-thu-hai
jobs:
  ten-job-la-day:
    docker: # run the steps with Docker
      - image: cimg/php:7.4.26-apache
    steps:
      - checkout
      - run: cp .env.example .env
      - run: echo "Hi I'm on Runners!"
      - run: echo $CIRCLE_BRANCH
  job-thu-hai:
    docker: # run the steps with Docker
      - image: cimg/php:7.4.26-apache
    steps:
      - run: echo "This is job second"
  checkout-code:
    parallelism: 1
    executor:
      name: build-test
    working_directory: ~/workspace
    steps:
      - checkout
      - persist_to_workspace:
          root: ~/workspace
          paths:
           - ./*
build:
  executor:
    name: build-test
  steps:
    - attach_workspace:
        at: ~/workspace
    - run:
        name: Configure PHP env
        command: cp .env.example .env
    - persist_to_workspace:
        root: ~/workspace
        paths:
          - ./*
executors:
 build-test:
   docker:
     - image: circleci/php:7.4.26-apache
   working_directory: ~/workspace